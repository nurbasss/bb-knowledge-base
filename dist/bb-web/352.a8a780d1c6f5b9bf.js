"use strict";(self.webpackChunkbb_web=self.webpackChunkbb_web||[]).push([[352],{2352:(y,g,n)=>{n.r(g),n.d(g,{VariableModule:()=>c});var b=n(8692),o=n(9900),h=n(7553),p=n(3891),v=n(6169),m=n(3151),C=n(2147),e=n(4537),_=n(9923),f=n(1067),x=n(8292),Z=n(605);function A(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",19),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.editVariable(l))}),e._UZ(10,"img",20),e.qZA(),e.TgZ(11,"td",19),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.deleteVariable(l))}),e._UZ(12,"img",21),e.qZA()()}if(2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.value),e.xp6(2),e.Oqu(t.category_name),e.xp6(2),e.Oqu(t.sub_category_name)}}function O(i,a){if(1&i&&(e.TgZ(0,"table",16)(1,"thead")(2,"tr")(3,"th",17),e._uU(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(5,"th",17),e._uU(6,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),e.qZA(),e.TgZ(7,"th",17),e._uU(8,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),e.qZA(),e.TgZ(9,"th",17),e._uU(10,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),e.qZA(),e.TgZ(11,"th",17),e._uU(12,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),e.qZA(),e.TgZ(13,"th",17),e._uU(14,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,A,13,4,"tr",18),e.qZA()()),2&i){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.variablesList)}}function M(i,a){1&i&&(e.TgZ(0,"div",22),e._uU(1," \u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e "),e.qZA())}class u{constructor(a,t,r,s){this.variableService=a,this.modalService=t,this.toastr=r,this.changeDetector=s,this.searchString=new o.NI,this.variablesList=[],this.allVariables=[]}ngOnInit(){this.variableService.getAllVariables(),this.variableService.variablesList$.subscribe(a=>{this.allVariables=[...a],this.variablesList=[...a],this.changeDetector.detectChanges()}),this.subscribeSearch()}createVariable(){this.modalService.open(p.d,{modalDialogClass:"mw-740 mh-600",centered:!0})}onKeyPress(a){}subscribeSearch(){this.searchString.valueChanges.pipe((0,m.b)(800),(0,C.x)()).subscribe(a=>{a?(this.variablesList=this.allVariables.filter(t=>t?.name?.toLowerCase().includes(a?.toLowerCase())||t?.value?.toLowerCase()===a?.toLowerCase()),this.changeDetector.detectChanges()):(this.variablesList=[...this.allVariables],this.changeDetector.detectChanges())})}deleteVariable(a){const t=this.modalService.open(v.Y,{centered:!0});t.componentInstance.message=`\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e "${a.name}"?`,t.result.then(r=>{r&&this.variableService.deleteVariable(a.id).subscribe({next:s=>{(0,h.PE)("\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430",this.toastr),this.variableService.getAllVariables()},error:s=>{(0,h.N3)(s,this.toastr)}})})}editVariable(a){const t=this.modalService.open(p.d,{modalDialogClass:"mw-740 mh-600",centered:!0});t.componentInstance.type="edit",t.componentInstance.editVariable=a}}u.\u0275fac=function(a){return new(a||u)(e.Y36(_.S),e.Y36(f.FF),e.Y36(x._W),e.Y36(e.sBO))},u.\u0275cmp=e.Xpm({type:u,selectors:[["bb-all-variables"]],decls:19,vars:6,consts:[[1,"container-wrapper"],[1,"variables"],[1,"variables-header"],[1,"variables-title"],["type","button",1,"_btn","btn-success","variables-button",3,"click"],[1,"variables-search"],[1,"search"],[1,"search__left"],[1,"search__icon"],["src","./assets/icons/search.svg","alt","search"],["type","text","placeholder","\u041f\u043e\u0438\u0441\u043a",1,"search__input",3,"formControl","keyup","change"],["searchInput",""],[3,"loading"],[1,"variables-table"],["class","table table-striped",4,"ngIf"],["class","variables-table__emtpy",4,"ngIf"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"click"],["src","./assets/icons/edit.svg","alt","edit",1,"variables-icon"],["src","./assets/icons/delete_urn.svg","alt","delete",1,"variables-icon"],[1,"variables-table__emtpy"]],template:function(a,t){if(1&a){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return t.createVariable()}),e._uU(6," \u0421\u043e\u0437\u0434\u0430\u0442\u044c "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"img",9),e.qZA(),e.TgZ(12,"input",10,11),e.NdJ("keyup",function(l){return t.onKeyPress(l)})("change",function(){e.CHM(r);const l=e.MAs(13);return e.KtG(l.value=l.value.trim())}),e.qZA()()()(),e.TgZ(14,"bb-loader",12),e.ALo(15,"async"),e.TgZ(16,"div",13),e.YNc(17,O,17,1,"table",14),e.YNc(18,M,2,0,"div",15),e.qZA()()()()}2&a&&(e.xp6(12),e.Q6J("formControl",t.searchString),e.xp6(2),e.Q6J("loading",e.lcZ(15,4,t.variableService.isVariableListLoading$)||!1),e.xp6(3),e.Q6J("ngIf",(null==t.variablesList?null:t.variablesList.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==t.variablesList?null:t.variablesList.length)))},dependencies:[b.sg,b.O5,o.Fj,o.JJ,o.oH,Z.R,b.Ov],styles:[".variables-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.variables-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.variables-button[_ngcontent-%COMP%]{height:40px;padding:0 16px;width:auto}.variables-search[_ngcontent-%COMP%]{margin-bottom:24px}.variables-icon[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.variables[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 24px 8px 16px;border-radius:12px;background-color:#f3f3f3;max-width:328px;align-items:center;position:relative;margin-bottom:16px}.variables[_ngcontent-%COMP%]   .search__left[_ngcontent-%COMP%]{display:flex;align-items:center}.variables[_ngcontent-%COMP%]   .search__icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:8px}.variables[_ngcontent-%COMP%]   .search__text[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#152536}.variables[_ngcontent-%COMP%]   .search__input[_ngcontent-%COMP%]{width:100%;max-width:242px;border:none;background-color:transparent;outline:none;padding-right:8px;font-size:14px;font-weight:500;color:#152536}.variables-table[_ngcontent-%COMP%]{overflow:auto}.variables-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .variables-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){text-align:center}"]});var T=n(7802),P=n(4466);const V=[{path:"",component:u}];class c{}c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[b.ez,T.Bz.forChild(V),o.UX,o.u5,P.m]})}}]);