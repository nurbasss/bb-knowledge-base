"use strict";(self.webpackChunkbb_web=self.webpackChunkbb_web||[]).push([[352],{2352:(T,b,a)=>{a.r(b),a.d(b,{VariableModule:()=>c});var d=a(8692),l=a(9900),p=a(7553),h=a(3891),v=a(6169),m=a(3151),C=a(2147),t=a(4537),f=a(9923),x=a(5497),_=a(8292),Z=a(605);function A(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",17),t.NdJ("click",function(){const i=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.editVariable(i))}),t._UZ(10,"img",18),t.qZA(),t.TgZ(11,"td",17),t.NdJ("click",function(){const i=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.deleteVariable(i))}),t._UZ(12,"img",19),t.qZA()()}if(2&o){const n=e.$implicit;t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Oqu(n.value),t.xp6(2),t.Oqu(n.category_name),t.xp6(2),t.Oqu(n.sub_category_name)}}class u{constructor(e,n,r){this.variableService=e,this.modalService=n,this.toastr=r,this.searchString=new l.NI,this.variablesList=[]}ngOnInit(){this.variableService.getAllVariables(),this.variableService.variablesList$.subscribe(e=>this.variablesList=[...e])}createVariable(){this.modalService.open(h.d,{modalDialogClass:"mw-740 mh-600",centered:!0})}onKeyPress(e){}subscribeSearch(){this.searchString.valueChanges.pipe((0,m.b)(800),(0,C.x)()).subscribe(e=>{})}deleteVariable(e){const n=this.modalService.open(v.Y,{centered:!0});n.componentInstance.message=`\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e "${e.name}"?`,n.result.then(r=>{r&&this.variableService.deleteVariable(e.id).subscribe({next:s=>{(0,p.PE)("\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430",this.toastr),this.variableService.getAllVariables()},error:s=>{(0,p.N3)(s,this.toastr)}})})}editVariable(e){const n=this.modalService.open(h.d,{modalDialogClass:"mw-740 mh-600",centered:!0});n.componentInstance.type="edit",n.componentInstance.editVariable=e}}u.\u0275fac=function(e){return new(e||u)(t.Y36(f.S),t.Y36(x.FF),t.Y36(_._W))},u.\u0275cmp=t.Xpm({type:u,selectors:[["bb-all-variables"]],decls:34,vars:5,consts:[[1,"container-wrapper"],[1,"variables"],[1,"variables-header"],[1,"variables-title"],["type","button",1,"_btn","btn-success","variables-button",3,"click"],[1,"variables-search"],[1,"search"],[1,"search__left"],[1,"search__icon"],["src","./assets/icons/search.svg","alt","search"],["type","text","placeholder","\u041f\u043e\u0438\u0441\u043a",1,"search__input",3,"formControl","keyup","change"],["searchInput",""],[3,"loading"],[1,"variables-table"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"click"],["src","./assets/icons/edit.svg","alt","edit",1,"variables-icon"],["src","./assets/icons/delete_urn.svg","alt","delete",1,"variables-icon"]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.createVariable()}),t._uU(6," \u0421\u043e\u0437\u0434\u0430\u0442\u044c "),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t._UZ(11,"img",9),t.qZA(),t.TgZ(12,"input",10,11),t.NdJ("keyup",function(i){return n.onKeyPress(i)})("change",function(){t.CHM(r);const i=t.MAs(13);return t.KtG(i.value=i.value.trim())}),t.qZA()()()(),t.TgZ(14,"bb-loader",12),t.ALo(15,"async"),t.TgZ(16,"div",13)(17,"table",14)(18,"thead")(19,"tr")(20,"th",15),t._uU(21,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(22,"th",15),t._uU(23,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(24,"th",15),t._uU(25,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(26,"th",15),t._uU(27,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(28,"th",15),t._uU(29,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),t.qZA(),t.TgZ(30,"th",15),t._uU(31,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,A,13,4,"tr",16),t.qZA()()()()()()}2&e&&(t.xp6(12),t.Q6J("formControl",n.searchString),t.xp6(2),t.Q6J("loading",t.lcZ(15,3,n.variableService.isVariableListLoading$)||!1),t.xp6(19),t.Q6J("ngForOf",n.variablesList))},dependencies:[d.sg,l.Fj,l.JJ,l.oH,Z.R,d.Ov],styles:[".variables-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.variables-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.variables-button[_ngcontent-%COMP%]{height:40px;padding:0 16px;width:auto}.variables-search[_ngcontent-%COMP%]{margin-bottom:24px}.variables-icon[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.variables[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 24px 8px 16px;border-radius:12px;background-color:#f3f3f3;max-width:328px;align-items:center;position:relative;margin-bottom:16px}.variables[_ngcontent-%COMP%]   .search__left[_ngcontent-%COMP%]{display:flex;align-items:center}.variables[_ngcontent-%COMP%]   .search__icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:8px}.variables[_ngcontent-%COMP%]   .search__text[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#152536}.variables[_ngcontent-%COMP%]   .search__input[_ngcontent-%COMP%]{width:100%;max-width:242px;border:none;background-color:transparent;outline:none;padding-right:8px;font-size:14px;font-weight:500;color:#152536}.variables-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .variables-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){text-align:center}"]});var M=a(7802),O=a(4466);const P=[{path:"",component:u}];class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[d.ez,M.Bz.forChild(P),l.UX,l.u5,O.m]})}}]);