"use strict";(self.webpackChunkbb_web=self.webpackChunkbb_web||[]).push([[506],{1506:(Pt,I,a)=>{a.r(I),a.d(I,{CategoryModule:()=>b});var u=a(9900),h=a(8692),c=a(7553),t=a(4537),m=a(8247),M=a(6943),T=a(8292),y=a(6618);function Y(n,o){if(1&n&&(t.TgZ(0,"ng-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.title," ")}}function $(n,o){if(1&n&&(t.TgZ(0,"div",4)(1,"p",5),t._uU(2,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(3,"ng-select",13),t.ALo(4,"async"),t.YNc(5,Y,2,2,"ng-option",14),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("loading",t.lcZ(4,3,e.categoryService.isCategoryListLoading$)||!1)("searchable",!0),t.xp6(2),t.Q6J("ngForOf",e.categories)}}class _{constructor(o,e,i,s,r,l){this.route=o,this.fb=e,this.categoryService=i,this.toastr=s,this.router=r,this.changeDetector=l,this.type="category",this.isEdit=!1,this.categories=[],this.tags=[{name:"\u0422\u044d\u0433 1"},{name:"\u0422\u044d\u0433 2"},{name:"\u0422\u044d\u0433 3"},{name:"\u0422\u044d\u0433 4"}],this.addNewTag=g=>({name:g}),this.form=this.fb.group({users:[null],title:[null,u.kI.required],description:[null],tags:[null],category:[null]})}ngOnInit(){this.route.params.subscribe(o=>{this.type=o.type,console.log(this.router.url),this.editId=Number(o.id);const e=this.router.url.split("/")[2].toString();console.log(this.router.url.split("/")[2]),console.log("edit"===e),this.form.reset(),"subcategory"===this.type?(this.categoryService.getCategoryList(),this.editId&&(this.isEdit=!0,this.edit()),this.categoryService.categoryList$.subscribe(i=>{this.categories=i,this.changeDetector.detectChanges()})):this.editId&&(this.isEdit=!0,this.edit())})}getTitle(){return"subcategory"===this.type?this.isEdit?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e":this.isEdit?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}onSubmitForm(){const o=()=>{(0,c.PE)("subcategory"===this.type?this.isEdit?"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430":"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430":this.isEdit?"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430":"\u041a\u0430\u0442\u0435\u043e\u0433\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430",this.toastr),this.categoryService.getCategoryList(),this.router.navigate(["/home"])};if("subcategory"===this.type){const e={title:this.form.controls.title.value,description:this.form.controls.description.value,category_id:this.form.controls.category.value,content:this.form.controls.description.value};this.isEdit?(e._method="PUT",this.categoryService.editSubcategory(e,this.editId).subscribe({next:o,error:i=>{(0,c.N3)(i,this.toastr)}})):this.categoryService.createSubcategory(e).subscribe({next:o,error:i=>{(0,c.N3)(i,this.toastr)}})}else{const e={title:this.form.controls.title.value,description:this.form.controls.description.value};this.isEdit?(e._method="PUT",this.categoryService.editCategory(e,this.editId).subscribe({next:o,error:i=>{(0,c.N3)(i,this.toastr)}})):this.categoryService.createCategory(e).subscribe({next:o,error:i=>{(0,c.N3)(i,this.toastr)}})}}edit(){this.editCategory="subcategory"===this.type?this.categoryService.getLocalSubcategoryById(this.editId):this.categoryService.getCategoryById(this.editId),console.log(this.type),console.log(this.editCategory),this.form.controls.title.setValue(this.editCategory?.title),this.form.controls.description.setValue(this.editCategory?.description),"subcategory"===this.type&&this.form.controls.category.setValue(this.categoryService.getCategoryById(this.editCategory?.category_id)),this.changeDetector.detectChanges()}}_.\u0275fac=function(o){return new(o||_)(t.Y36(m.gz),t.Y36(u.qu),t.Y36(M.H),t.Y36(T._W),t.Y36(m.F0),t.Y36(t.sBO))},_.\u0275cmp=t.Xpm({type:_,selectors:[["bb-create-category"]],decls:19,vars:4,consts:[[1,"container-wrapper"],[1,"create-category",3,"formGroup"],[1,"create-category__title","mb_24"],[1,"row","mb_24"],[1,"col-6"],[1,"create-category__subtitle"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","id","floatingTitle","formControlName","title",1,"form-control","base-input"],["class","col-6",4,"ngIf"],[1,"row"],[1,"col-12"],["formControlName","description","id","","rows","3",1,"form-control","base-input"],[1,"create-category__footer"],[1,"_btn","btn-success","create-btn",3,"click"],["formControlName","category","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e","dropdownPosition","bottom","notFoundText","\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",1,"base-select",3,"loading","searchable"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t._UZ(4,"div",3),t.TgZ(5,"div",3)(6,"div",4)(7,"p",5),t._uU(8,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.YNc(10,$,6,5,"div",7),t.qZA(),t.TgZ(11,"div",8)(12,"div",9)(13,"p",5),t._uU(14,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)"),t.qZA(),t._UZ(15,"textarea",10),t.qZA()(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){return e.onSubmitForm()}),t._uU(18),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(2),t.Oqu(e.getTitle()),t.xp6(7),t.Q6J("ngIf","subcategory"===e.type),t.xp6(8),t.hij(" ",e.isEdit?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"," "))},dependencies:[h.sg,h.O5,u.Fj,u.JJ,u.JL,u.sg,u.u,y.w9,y.jq,h.Ov],styles:[".create-category__title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#152536;letter-spacing:.02em}.create-category__subtitle[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#152536cc;letter-spacing:.02em;margin-bottom:12px}.create-category__footer[_ngcontent-%COMP%]{margin-top:40px;display:flex;justify-content:flex-end}.create-category__footer[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{height:40px;width:auto}"]});var z=a(3151),K=a(2147),P=a(5497),A=a(9923);function Q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",15)(2,"input",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.selectVar(r))}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()()}if(2&n){const e=o.$implicit,i=o.index;t.xp6(2),t.Q6J("id",i),t.xp6(2),t.hij(" ",e.category_name," "),t.xp6(2),t.Oqu(e.sub_category_name),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.value)}}class C{constructor(o,e,i){this.activeModal=o,this.variableService=e,this.changeDetector=i,this.variablesList=[],this.searchString=new u.NI}ngOnInit(){this.variableService.variablesList$.subscribe(o=>{this.variablesList=o,this.changeDetector.detectChanges()})}close(){this.activeModal.close()}sendSelected(){this.activeModal.close(this.selectedVariable)}selectVar(o){this.selectedVariable=o}onKeyPress(o){}subscribeSearch(){this.searchString.valueChanges.pipe((0,z.b)(800),(0,K.x)()).subscribe(o=>{})}}C.\u0275fac=function(o){return new(o||C)(t.Y36(P.Kz),t.Y36(A.S),t.Y36(t.sBO))},C.\u0275cmp=t.Xpm({type:C,selectors:[["bb-variable-modal"]],decls:29,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"search"],[1,"search__left"],[1,"search__icon"],["src","./assets/icons/search.svg","alt","search"],["type","text","placeholder","\u041f\u043e\u0438\u0441\u043a",1,"search__input",3,"formControl","keyup","change"],["searchInput",""],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"_btn","btn-success","variable-button",3,"click"],["scope","row"],["type","radio","name","nems",3,"id","click"]],template:function(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"\u0412\u044b\u0431\u043e\u0440 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.TgZ(9,"input",8,9),t.NdJ("keyup",function(r){return e.onKeyPress(r)})("change",function(){t.CHM(i);const r=t.MAs(10);return t.KtG(r.value=r.value.trim())}),t.qZA()()(),t.TgZ(11,"div")(12,"table",10)(13,"thead")(14,"tr"),t._UZ(15,"th",11),t.TgZ(16,"th",11),t._uU(17,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(18,"th",11),t._uU(19,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(20,"th",11),t._uU(21,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(22,"th",11),t._uU(23,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,Q,11,5,"tr",12),t.qZA()()()(),t.TgZ(26,"div",13)(27,"button",14),t.NdJ("click",function(){return e.sendSelected()}),t._uU(28," \u0412\u044b\u0431\u043e\u0440 "),t.qZA()()}2&o&&(t.xp6(9),t.Q6J("formControl",e.searchString),t.xp6(16),t.Q6J("ngForOf",e.variablesList))},dependencies:[h.sg,u.Fj,u.JJ,u.oH],styles:[".modal-header[_ngcontent-%COMP%]{border-bottom:none;padding:24px}.search[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 24px 8px 16px;border-radius:12px;background-color:#f3f3f3;max-width:250px;align-items:center;position:relative;margin-bottom:16px}.search__left[_ngcontent-%COMP%]{display:flex;align-items:center}.search__icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:8px}.search__text[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#152536}.search__input[_ngcontent-%COMP%]{width:100%;max-width:242px;border:none;background-color:transparent;outline:none;padding-right:8px;font-size:14px;font-weight:500;color:#152536}.variable-button[_ngcontent-%COMP%]{max-width:120px;height:40px}input[type=radio][_ngcontent-%COMP%]{height:20px;width:20px;margin:auto 0}input[type=radio][_ngcontent-%COMP%]:after{border-color:#50c55a;background-color:#50c55a}"]});var S=a(4121),G=a(3891),O=a(4135);class w{constructor(o,e,i){this.postService=o,this.activeModal=e,this.toastr=i,this.file=null}close(){this.activeModal.close()}onFilechange(o){console.log(o.target.files[0]),this.file=o.target.files[0]}upload(){this.file?this.postService.uploadImage(this.file).subscribe({next:o=>{this.activeModal.close(o?.images?.url)},error:o=>{(0,c.N3)(o,this.toastr)}}):(0,c.gD)("\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",this.toastr)}}w.\u0275fac=function(o){return new(o||w)(t.Y36(O.L),t.Y36(P.Kz),t.Y36(T._W))},w.\u0275cmp=t.Xpm({type:w,selectors:[["bb-image-upload"]],decls:14,vars:0,consts:[[1,"modal-header"],[1,"modal__title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-md-4"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","id","formFile",1,"form-control",3,"change"],["type","button",1,"btn","btn-primary","mt-3",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.close()}),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),t._uU(10,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(11,"input",9),t.NdJ("change",function(s){return e.onFilechange(s)}),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return e.upload()}),t._uU(13," \u0412\u044b\u0431\u0440\u0430\u0442\u044c "),t.qZA()()()()()())}});var U=a(4581),H=a(3072),F=a(8023),B=a(3528),X=a(5598),W=a(116),tt=a(2069);class et extends F.x{constructor(o=1/0,e=1/0,i=tt.l){super(),this._bufferSize=o,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,o),this._windowTime=Math.max(1,e)}next(o){const{isStopped:e,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:l}=this;e||(i.push(o),!s&&i.push(r.now()+l)),this._trimBuffer(),super.next(o)}_subscribe(o){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(o),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let l=0;l<r.length&&!o.closed;l+=i?1:2)o.next(r[l]);return this._checkFinalizedStatuses(o),e}_trimBuffer(){const{_bufferSize:o,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*o;if(o<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const l=e.now();let g=0;for(let v=1;v<i.length&&i[v]<=l;v+=2)g=v;g&&i.splice(0,g+1)}}}var ot=a(815);function it(n,o){}const Z=()=>{const n=typeof window<"u"?window:void 0;return n&&n.tinymce?n.tinymce:null};let st=(()=>{class n{constructor(){this.onBeforePaste=new t.vpe,this.onBlur=new t.vpe,this.onClick=new t.vpe,this.onContextMenu=new t.vpe,this.onCopy=new t.vpe,this.onCut=new t.vpe,this.onDblclick=new t.vpe,this.onDrag=new t.vpe,this.onDragDrop=new t.vpe,this.onDragEnd=new t.vpe,this.onDragGesture=new t.vpe,this.onDragOver=new t.vpe,this.onDrop=new t.vpe,this.onFocus=new t.vpe,this.onFocusIn=new t.vpe,this.onFocusOut=new t.vpe,this.onKeyDown=new t.vpe,this.onKeyPress=new t.vpe,this.onKeyUp=new t.vpe,this.onMouseDown=new t.vpe,this.onMouseEnter=new t.vpe,this.onMouseLeave=new t.vpe,this.onMouseMove=new t.vpe,this.onMouseOut=new t.vpe,this.onMouseOver=new t.vpe,this.onMouseUp=new t.vpe,this.onPaste=new t.vpe,this.onSelectionChange=new t.vpe,this.onActivate=new t.vpe,this.onAddUndo=new t.vpe,this.onBeforeAddUndo=new t.vpe,this.onBeforeExecCommand=new t.vpe,this.onBeforeGetContent=new t.vpe,this.onBeforeRenderUI=new t.vpe,this.onBeforeSetContent=new t.vpe,this.onChange=new t.vpe,this.onClearUndos=new t.vpe,this.onDeactivate=new t.vpe,this.onDirty=new t.vpe,this.onExecCommand=new t.vpe,this.onGetContent=new t.vpe,this.onHide=new t.vpe,this.onInit=new t.vpe,this.onInitNgModel=new t.vpe,this.onLoadContent=new t.vpe,this.onNodeChange=new t.vpe,this.onPostProcess=new t.vpe,this.onPostRender=new t.vpe,this.onPreInit=new t.vpe,this.onPreProcess=new t.vpe,this.onProgressState=new t.vpe,this.onRedo=new t.vpe,this.onRemove=new t.vpe,this.onReset=new t.vpe,this.onResizeEditor=new t.vpe,this.onSaveContent=new t.vpe,this.onSetAttrib=new t.vpe,this.onObjectResizeStart=new t.vpe,this.onObjectResized=new t.vpe,this.onObjectSelected=new t.vpe,this.onSetContent=new t.vpe,this.onShow=new t.vpe,this.onSubmit=new t.vpe,this.onUndo=new t.vpe,this.onVisualAid=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),n})();const N=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],E=(n,o,e)=>(0,U.R)(n,o).pipe((0,B.R)(e)),k=(n,o)=>"string"==typeof n?n.split(",").map(e=>e.trim()):Array.isArray(n)?n:o;let V=0;const q=n=>typeof n<"u"&&"textarea"===n.tagName.toLowerCase(),L=n=>typeof n>"u"||""===n?[]:Array.isArray(n)?n:n.split(" "),lt=(n,o)=>L(n).concat(L(o)),ct=()=>{},J=n=>null==n,dt=(()=>{let n={script$:null};return{load:(i,s)=>n.script$||(n.script$=(0,H.P)(()=>{const r=i.createElement("script");return r.referrerPolicy="origin",r.type="application/javascript",r.src=s,i.head.appendChild(r),(0,U.R)(r,"load").pipe((0,X.q)(1),(0,W.h)(void 0))}).pipe(function nt(n,o,e){let i,s=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:o=1/0,refCount:s=!1,scheduler:e}=n):i=n??1/0,(0,ot.B)({connector:()=>new et(i,o,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}({bufferSize:1,refCount:!0}))),reinitialize:()=>{n={script$:null}}}})(),gt=new t.OlP("TINYMCE_SCRIPT_SRC"),ht={provide:u.JU,useExisting:(0,t.Gpc)(()=>D),multi:!0};let D=(()=>{class n extends st{constructor(e,i,s,r){super(),this.platformId=s,this.tinymceScriptSrc=r,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=ct,this.destroy$=new F.x,this.initialise=()=>{const l={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:lt(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:g=>{this._editor=g,E(g,"init",this.destroy$).subscribe(()=>{this.initEditor(g)}),((n,o,e)=>{(n=>{const o=k(n.ignoreEvents,[]);return k(n.allowedEvents,N).filter(i=>N.includes(i)&&!o.includes(i))})(n).forEach(s=>{const r=n[s];E(o,s.substring(2),e).subscribe(l=>{r.observers.length>0&&n.ngZone.run(()=>r.emit({event:l,editor:o}))})})})(this,g,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(g)}};q(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{Z().init(l)})},this._elementRef=e,this.ngZone=i}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(J(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,h.NF)(this.platformId)&&(this.id=this.id||(n=>{const e=(new Date).getTime(),i=Math.floor(1e9*Math.random());return V++,"tiny-angular_"+i+V+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==Z()?this.initialise():this._element&&this._element.ownerDocument&&dt.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,B.R)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==Z()&&Z().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,q(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return J(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){E(e,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),E(e,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi),t.Y36(gt,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[t._Bn([ht]),t.qOj,t.jDz],decls:1,vars:0,template:function(e,i){1&e&&t.YNc(0,it,0,0,"ng-template")},dependencies:[h.ez,u.u5],styles:["[_nghost-%COMP%]{display:block}"]}),n})(),pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[D]}),n})();function mt(n,o){if(1&n&&(t.TgZ(0,"ng-option",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.title," ")}}function _t(n,o){if(1&n&&(t.TgZ(0,"ng-option",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.title," ")}}class f{constructor(o,e,i,s,r,l,g,v,Mt){this.fb=o,this.modalService=e,this.changeDetector=i,this.categoryService=s,this.variableService=r,this.postService=l,this.toastr=g,this.route=v,this.router=Mt,this.showChooseVariableModal$=new S.X(!1),this.showAddVariableModal$=new S.X(!1),this.showImageUploadModal$=new S.X(!1),this.dataToInsert=new S.X(""),this.editorData="",this.variables=[],this.subcategories=[],this.usedVariableIds=[],this.type="create",this.isEditPostLoading=!1,this.tags=[{name:"\u0422\u044d\u0433 1"},{name:"\u0422\u044d\u0433 2"},{name:"\u0422\u044d\u0433 3"},{name:"\u0422\u044d\u0433 4"}],this.init={content_style:".variable { background-color: yellow; }",height:500,valid_elements:"bb-variable[*],br,table,tr,td,th,tbody,thead,tfoot,img[*]",menubar:"edit view format tools table help",plugins:["table","image","link","advlist","autolink","lists","charmap","preview","anchor","pagebreak","code"],toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | bullist numlist | link | imageButton | chooseVariableButton | addVariableButton |",setup:p=>{p.ui.registry.addButton("chooseVariableButton",{text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e",onAction:()=>{this.showChooseVariableModal$.next(!0),this.dataToInsert.next(""),this.dataToInsertSubscription&&this.dataToInsertSubscription.unsubscribe(),this.dataToInsertSubscription=this.dataToInsert.subscribe(d=>{d&&p.insertContent(d)})}}),p.ui.registry.addButton("addVariableButton",{text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e",onAction:()=>{this.showAddVariableModal$.next(!0),this.dataToInsert.next(""),this.dataToInsertSubscription&&this.dataToInsertSubscription.unsubscribe(),this.dataToInsertSubscription=this.dataToInsert.subscribe(d=>{d&&p.insertContent(d)})}}),p.ui.registry.addButton("imageButton",{icon:"image",onAction:()=>{this.showImageUploadModal$.next(!0),this.dataToInsert.next(""),this.dataToInsertSubscription&&this.dataToInsertSubscription.unsubscribe(),this.dataToInsertSubscription=this.dataToInsert.subscribe(d=>{d&&p.insertContent(d)})}}),p.on("keydown",d=>{if(13==d.keyCode&&d.shiftKey)return d.preventDefault(),void d.stopPropagation();13===d.keyCode&&p.insertContent("<br>")})}},this.addNewTag=p=>({name:p}),this.form=this.fb.group({title:[null,u.kI.required],category:[null,u.kI.required],subcategory:[null,u.kI.required],postTags:[null],editorContent:[null,u.kI.required]})}ngOnInit(){this.showChooseVariableModal$.subscribe(o=>{o&&document.getElementById("choose")?.click()}),this.showAddVariableModal$.subscribe(o=>{o&&document.getElementById("add")?.click()}),this.showImageUploadModal$.subscribe(o=>{o&&document.getElementById("imageUpload")?.click()}),this.variableService.getAllVariables(),this.categoryService.getCategoryList(),this.route.params.subscribe(o=>{this.type=o.action,"edit"===this.type&&(this.postId=o.id,this.getPostById())})}handler(){console.log("clicked")}openChooseVariableModal(){this.modalService.open(C,{scrollable:!0,modalDialogClass:"mw-740",centered:!0}).result.then(e=>{e&&this.dataToInsert.next(`&nbsp;<bb-variable class="variable mceNonEditable" var="${e.id}">${e.value}</bb-variable>&nbsp;`)})}handleVariables(o){this.usedVariableIds=[];const e=/<bb-variable\s+class="([^"]+)"\s+var="([^"]+)">([^<]+)<\/bb-variable>/g;let i;for(;null!==(i=e.exec(o));){const s=Number(i[2]);this.usedVariableIds.includes(s)||this.usedVariableIds.push(s)}}openAddVariableModal(){this.modalService.open(G.d,{modalDialogClass:"mw-740 mh-600",centered:!0}).result.then(e=>{e&&(this.dataToInsert.next(`&nbsp;<bb-variable class="variable mceNonEditable"  var="${e.id}" >${e.value}</bb-variable>&nbsp;`),this.variableService.getAllVariables())})}onCategoryChange(o){this.subcategories=[],this.form.controls.subcategory.setValue(null),o&&(this.subcategories=o.sub_categories),this.changeDetector.detectChanges()}onFormSubmit(){const o=this.form.controls.editorContent.value;this.handleVariables(o),console.log(this.form.controls.editorContent.value),console.log(this.usedVariableIds);let e={title:this.form.controls.title.value,description:"desc",content:o,sub_category_id:this.form.controls.subcategory.value.id,variable_ids:this.usedVariableIds};"edit"===this.type&&this.editPost?(e._method="PUT",this.postService.updatePost(e,this.postId).subscribe({next:i=>{(0,c.PE)("\u041f\u043e\u0441\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d",this.toastr),this.router.navigate(i?.posts?.id?["posts/post/"+i?.posts?.id]:["home"])}})):this.postService.createPost(e).subscribe({next:i=>{(0,c.PE)("\u041f\u043e\u0441\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",this.toastr),this.router.navigate(i?.posts?.id?["posts/post/"+i?.posts?.id]:["home"])},error:i=>{(0,c.N3)(i,this.toastr)}})}getPostById(){this.isEditPostLoading=!0,this.changeDetector.detectChanges(),this.postService.getPostById(this.postId).subscribe({next:o=>{this.editPost=o.posts,this.form.controls.editorContent.setValue(this.editPost?.content),this.form.controls.title.setValue(this.editPost?.title),this.form.controls.category.setValue(this.categoryService.getCategoryBySubcateryId(this.editPost?.sub_category_id)),this.onCategoryChange(this.form.controls.category.value),this.form.controls.subcategory.setValue(this.categoryService.getLocalSubcategoryById(this.editPost.sub_category_id)),this.isEditPostLoading=!1,this.changeDetector.detectChanges()},error:o=>{(0,c.N3)(o,this.toastr),this.isEditPostLoading=!1,this.changeDetector.detectChanges()}})}openImageUploadModal(){this.modalService.open(w,{centered:!0}).result.then(e=>{if(e){const r=`<img src="http://${e.replaceAll("//","/")}" />`;this.dataToInsert.next(r),this.variableService.getAllVariables()}})}}f.\u0275fac=function(o){return new(o||f)(t.Y36(u.qu),t.Y36(P.FF),t.Y36(t.sBO),t.Y36(M.H),t.Y36(A.S),t.Y36(O.L),t.Y36(T._W),t.Y36(m.gz),t.Y36(m.F0))},f.\u0275cmp=t.Xpm({type:f,selectors:[["bb-create-post"]],decls:35,vars:10,consts:[[1,"container-wrapper",3,"formGroup"],[1,"create-post"],[1,"create-post__title"],["id","choose",2,"display","none",3,"click"],["id","add",2,"display","none",3,"click"],["id","imageUpload",2,"display","none",3,"click"],[1,"create-post__subtitle"],[1,"col-12","mb_16"],[1,"form-floating"],["type","text","id","title","formControlName","title","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",1,"form-control","base-input"],["for","postName"],[1,"row"],[1,"col-6","mb_24"],[1,"modal__subtitle"],["formControlName","category","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e","dropdownPosition","bottom","notFoundText","\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",1,"base-select",3,"searchable","change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subcategory","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e","dropdownPosition","bottom","notFoundText","\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",1,"base-select",3,"searchable"],[1,"create-post__editor"],["apiKey","jk8cihs8koq4u4ir3ja4r0so6wihe0qlqyazbw4wxp5tzlvm","initialValue","","formControlName","editorContent",3,"init"],[1,"create-post__footer"],[1,"_btn","btn-success","create-post__button",3,"click"],[3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"button",3),t.NdJ("click",function(){return e.openChooseVariableModal()}),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return e.openAddVariableModal()}),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.openImageUploadModal()}),t._uU(8," > "),t.qZA(),t.TgZ(9,"p",6),t._uU(10,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043e\u0441\u0442\u0430"),t.qZA(),t.TgZ(11,"div",7)(12,"div",8),t._UZ(13,"input",9),t.TgZ(14,"label",10),t._uU(15,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA()()(),t.TgZ(16,"div",11)(17,"div",12)(18,"p",13),t._uU(19,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(20,"ng-select",14),t.NdJ("change",function(s){return e.onCategoryChange(s)}),t.YNc(21,mt,2,2,"ng-option",15),t.ALo(22,"async"),t.qZA()(),t.TgZ(23,"div",12)(24,"p",13),t._uU(25,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(26,"ng-select",16),t.YNc(27,_t,2,2,"ng-option",15),t.qZA()()()()(),t.TgZ(28,"p",6),t._uU(29,"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430"),t.qZA(),t.TgZ(30,"div",17),t._UZ(31,"editor",18),t.qZA(),t.TgZ(32,"div",19)(33,"button",20),t.NdJ("click",function(){return e.onFormSubmit()}),t._uU(34),t.qZA()()()),2&o&&(t.Q6J("formGroup",e.form),t.xp6(3),t.hij(" ","edit"===e.type?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u0442":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"," "),t.xp6(17),t.Q6J("searchable",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(22,8,e.categoryService.categoryListObserver$)),t.xp6(5),t.Q6J("searchable",!0),t.xp6(1),t.Q6J("ngForOf",e.subcategories),t.xp6(4),t.Q6J("init",e.init),t.xp6(3),t.hij(" ","edit"===e.type?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"," "))},dependencies:[h.sg,u.Fj,u.JJ,u.JL,u.sg,u.u,y.w9,y.jq,D,h.Ov],styles:[".create-post__title{font-size:24px;font-weight:700;color:#152536;letter-spacing:.02em;margin-bottom:32px}.create-post__subtitle{font-size:16px;font-weight:600;color:#152536cc;letter-spacing:.02em;margin-bottom:24px}.create-post__footer{margin-top:24px;display:flex;justify-content:flex-end}.create-post__button{width:auto;height:40px}\n"],encapsulation:2});var ft=a(605);const j=function(n){return{backgroundColor:n}};function bt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15),t._UZ(1,"div",16),t.TgZ(2,"div",17)(3,"div",18)(4,"div",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.navigateSubcategory(r))}),t._uU(5),t.qZA(),t.TgZ(6,"div",20),t._uU(7),t.qZA()(),t.TgZ(8,"div",21),t._uU(9),t.qZA()()()}if(2&n){const e=o.$implicit,i=o.index,s=t.oxw(3);t.xp6(1),t.Q6J("ngStyle",t.VKq(4,j,s.getColor(i))),t.xp6(4),t.hij(" ",null==e?null:e.title," "),t.xp6(2),t.hij(" ",s.formatDate(null==e?null:e.updated_at)," "),t.xp6(2),t.hij(" ",null==e?null:e.description," ")}}function vt(n,o){if(1&n&&t.YNc(0,bt,10,6,"div",14),2&n){const e=t.oxw(2);t.Q6J("ngForOf",null==e.category?null:e.category.sub_categories)}}function yt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"p",23),t._uU(2,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"),t.qZA(),t.TgZ(3,"div",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.navigateForm("subcategory"))}),t._uU(4," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e "),t.qZA()()}}function Ct(n,o){if(1&n&&(t.YNc(0,vt,1,1,"ng-template",13),t.YNc(1,yt,5,0,"ng-template",13)),2&n){const e=t.oxw();t.Q6J("ngIf",null==e.category||null==e.category.sub_categories?null:e.category.sub_categories.length),t.xp6(1),t.Q6J("ngIf",!(null!=e.category&&null!=e.category.sub_categories&&e.category.sub_categories.length))}}function wt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15),t._UZ(1,"div",16),t.TgZ(2,"div",17)(3,"div",18)(4,"div",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.navigatePost(null==r?null:r.id))}),t._uU(5),t.qZA(),t.TgZ(6,"div",20),t._uU(7),t.qZA()(),t.TgZ(8,"div",21),t._uU(9),t.qZA()()()}if(2&n){const e=o.$implicit,i=o.index,s=t.oxw(3);t.xp6(1),t.Q6J("ngStyle",t.VKq(4,j,s.getColor(i))),t.xp6(4),t.hij(" ",null==e?null:e.title," "),t.xp6(2),t.hij(" ",s.formatDate(null==e?null:e.updated_at)," "),t.xp6(2),t.hij(" ",null==e?null:e.description," ")}}function xt(n,o){if(1&n&&t.YNc(0,wt,10,6,"div",14),2&n){const e=t.oxw(2);t.Q6J("ngForOf",null==e.category?null:e.category.posts)}}function Tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"p",23),t._uU(2,"\u041f\u043e\u0441\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"),t.qZA(),t.TgZ(3,"div",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.navigateForm("post"))}),t._uU(4," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e "),t.qZA()()}}function St(n,o){if(1&n&&(t.TgZ(0,"bb-loader",25),t.YNc(1,xt,1,1,"ng-template",13),t.YNc(2,Tt,5,0,"ng-template",13),t.qZA()),2&n){const e=t.oxw();t.Q6J("loading",e.isSubcategoryLoading),t.xp6(1),t.Q6J("ngIf",null==e.category||null==e.category.posts?null:e.category.posts.length),t.xp6(1),t.Q6J("ngIf",!(null!=e.category&&null!=e.category.posts&&e.category.posts.length))}}class x{constructor(o,e,i,s,r){this.categoryService=o,this.route=e,this.router=i,this.changeDetector=s,this.toastr=r,this.isSubcategoryLoading=!1}ngOnInit(){this.route.params.subscribe(o=>{this.subscription&&(this.category=null),this.type=o.type,this.categoryId=o.id,"category"===this.type?this.getCategory(this.categoryId):"subcategory"===this.type&&this.getSubcategoryById()})}getColor(o){return(0,c.C0)(o)}formatDate(o){return o?(0,c.F8)(o):""}getCategory(o){this.subscription=this.categoryService.categoryList$.subscribe(e=>{e.length&&(this.category=e.find(i=>i.id==o),this.changeDetector.detectChanges())})}navigateForm(o){"subcategory"===o?this.router.navigate(["categories/create/subcategory"]):"post"===o&&this.router.navigate(["categories/article/create"])}getSubcategoryById(){this.isSubcategoryLoading=!0,this.changeDetector.detectChanges(),this.categoryService.getSubcategoryById(this.categoryId).subscribe({next:o=>{this.category=o?.sub_category,this.isSubcategoryLoading=!1,this.changeDetector.detectChanges()},error:o=>{(0,c.N3)(o,this.toastr),this.isSubcategoryLoading=!1,this.changeDetector.detectChanges()}})}navigatePost(o){this.router.navigate(["/posts/post/"+o])}navigateBack(){this.router.navigate("subcategory"===this.type?["/categories/list/category/"+this.category?.category_id]:["/home"])}navigateEdit(){this.router.navigate([`/categories/edit/${this.type}/${this.categoryId}`])}navigateSubcategory(o){this.router.navigate(["/categories/list/subcategory/"+o.id])}}x.\u0275fac=function(o){return new(o||x)(t.Y36(M.H),t.Y36(m.gz),t.Y36(m.F0),t.Y36(t.sBO),t.Y36(T._W))},x.\u0275cmp=t.Xpm({type:x,selectors:[["bb-category-list"]],decls:22,vars:4,consts:[[1,"container-wrapper"],[1,"list"],[1,"list-header"],[1,"list-header__left","pointer",3,"click"],["src","./assets/icons/arrow_left_green.svg","alt",""],[1,"list-header__right"],[1,"pointer",3,"click"],["src","./assets/icons/edit_green.svg","alt",""],[1,"pointer"],["src","./assets/icons/delete_urn_green.svg","alt",""],[1,"list-body"],[1,"list-title"],[1,"list-wrapper"],[3,"ngIf"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"list-item__filled",3,"ngStyle"],[1,"list-item__body"],[1,"list-item__header"],[1,"list-item__text","hover",3,"click"],[1,"list-item__time"],[1,"list-item__description"],[1,"list-not-found"],[1,"title"],[1,"add-new",3,"click"],[3,"loading"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.NdJ("click",function(){return e.navigateBack()}),t.TgZ(4,"span"),t._UZ(5,"img",4),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"div",6),t.NdJ("click",function(){return e.navigateEdit()}),t.TgZ(9,"span"),t._UZ(10,"img",7),t.qZA(),t._uU(11," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c "),t.qZA(),t.TgZ(12,"div",8)(13,"span"),t._UZ(14,"img",9),t.qZA(),t._uU(15," \u0423\u0434\u0430\u043b\u0438\u0442\u044c "),t.qZA()()(),t.TgZ(16,"div",10)(17,"h3",11),t._uU(18),t.qZA(),t.TgZ(19,"div",12),t.YNc(20,Ct,2,2,"ng-template",13),t.YNc(21,St,3,3,"ng-template",13),t.qZA()()()()),2&o){let i;t.xp6(6),t.hij(" ","subcategory"===e.type?null==(i=e.categoryService.getCategoryById(null==e.category?null:e.category.category_id))?null:i.title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"," "),t.xp6(12),t.Oqu(null==e.category?null:e.category.title),t.xp6(2),t.Q6J("ngIf","category"===e.type),t.xp6(1),t.Q6J("ngIf","subcategory"===e.type)}},dependencies:[h.sg,h.O5,h.PC,ft.R],styles:[".list-header[_ngcontent-%COMP%]{padding-bottom:16px;padding-left:32px;padding-right:32px;margin:-16px -32px 16px;display:flex;align-items:center;justify-content:space-between;color:#2ab514;border-bottom:1px #f3f3f3 solid}.list-header__right[_ngcontent-%COMP%], .list-header__left[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:12px}.list-header__right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .list-header__left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.list-title[_ngcontent-%COMP%]{font-weight:600;font-size:24px;margin-bottom:24px}.list-item[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:space-between;align-items:center;min-height:100px}.list-item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:16px}.list-item__filled[_ngcontent-%COMP%]{height:100px;min-width:100px;border-radius:8px}.list-item__body[_ngcontent-%COMP%]{width:100%;align-self:flex-start}.list-item__header[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px;display:flex;align-items:center;justify-content:space-between}.list-item__text[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.list-item__description[_ngcontent-%COMP%], .list-item__time[_ngcontent-%COMP%]{color:#505c64;font-weight:500;font-size:14px}.list-not-found[_ngcontent-%COMP%]{text-align:center}.list-not-found[_ngcontent-%COMP%]   .add-new[_ngcontent-%COMP%]{margin-top:8px;cursor:pointer;color:#50c55a}.hover[_ngcontent-%COMP%]:hover{opacity:.7;cursor:pointer}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]});var Zt=a(4466);const Et=[{path:"create/:type",component:_},{path:"edit/:type/:id",component:_},{path:"article/:action/:id",component:f},{path:"article/:action",component:f},{path:"list/:type/:id",component:x}];class b{}b.\u0275fac=function(o){return new(o||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({imports:[h.ez,m.Bz.forChild(Et),u.UX,y.A0,u.u5,pt,Zt.m]})}}]);