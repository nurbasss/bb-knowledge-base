"use strict";(self.webpackChunkbb_web=self.webpackChunkbb_web||[]).push([[456],{9456:(y,g,a)=>{a.r(g),a.d(g,{VariableModule:()=>c});var b=a(8692),s=a(9900),p=a(7553),h=a(3891),t=a(4537),v=a(5497);class u{constructor(e){this.activeModal=e,this.message=""}close(){this.activeModal.close()}confirm(){this.activeModal.close(!0)}}u.\u0275fac=function(e){return new(e||u)(t.Y36(v.Kz))},u.\u0275cmp=t.Xpm({type:u,selectors:[["bb-confirmation-modal"]],inputs:{message:"message"},decls:12,vars:1,consts:[[1,"modal-header"],[1,"modal__title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"confirmation-text"],[1,"modal-footer"],[1,"_btn","btn-succes","confirmation-button",3,"click"],[1,"_btn","btn-outline-green","confirmation-button",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.close()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p",4),t._uU(6),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return n.confirm()}),t._uU(9," \u0414\u0430 "),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.close()}),t._uU(11," \u041e\u0442\u043c\u0435\u043d\u0430 "),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(n.message))}});var C=a(3151),_=a(2147),f=a(9923),Z=a(8292),x=a(605);function M(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",17),t.NdJ("click",function(){const r=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.editVariable(r))}),t._UZ(10,"img",18),t.qZA(),t.TgZ(11,"td",17),t.NdJ("click",function(){const r=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.deleteVariable(r))}),t._UZ(12,"img",19),t.qZA()()}if(2&o){const n=e.$implicit;t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Oqu(n.value),t.xp6(2),t.Oqu(n.category_name),t.xp6(2),t.Oqu(n.sub_category_name)}}class d{constructor(e,n,i){this.variableService=e,this.modalService=n,this.toastr=i,this.searchString=new s.NI,this.variablesList=[]}ngOnInit(){this.variableService.getAllVariables(),this.variableService.variablesList$.subscribe(e=>this.variablesList=[...e])}createVariable(){this.modalService.open(h.d,{modalDialogClass:"mw-740 mh-600",centered:!0})}onKeyPress(e){}subscribeSearch(){this.searchString.valueChanges.pipe((0,C.b)(800),(0,_.x)()).subscribe(e=>{})}deleteVariable(e){const n=this.modalService.open(u,{centered:!0});n.componentInstance.message=`\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e "${e.name}"?`,n.result.then(i=>{i&&this.variableService.deleteVariable(e.id).subscribe({next:l=>{(0,p.PE)("\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430",this.toastr),this.variableService.getAllVariables()},error:l=>{(0,p.N3)(l,this.toastr)}})})}editVariable(e){const n=this.modalService.open(h.d,{modalDialogClass:"mw-740 mh-600",centered:!0});n.componentInstance.type="edit",n.componentInstance.editVariable=e}}d.\u0275fac=function(e){return new(e||d)(t.Y36(f.S),t.Y36(v.FF),t.Y36(Z._W))},d.\u0275cmp=t.Xpm({type:d,selectors:[["bb-all-variables"]],decls:34,vars:5,consts:[[1,"container-wrapper"],[1,"variables"],[1,"variables-header"],[1,"variables-title"],["type","button",1,"_btn","btn-success","variables-button",3,"click"],[1,"variables-search"],[1,"search"],[1,"search__left"],[1,"search__icon"],["src","./assets/icons/search.svg","alt","search"],["type","text","placeholder","\u041f\u043e\u0438\u0441\u043a",1,"search__input",3,"formControl","keyup","change"],["searchInput",""],[3,"loading"],[1,"variables-table"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"click"],["src","./assets/icons/edit.svg","alt","edit",1,"variables-icon"],["src","./assets/icons/delete_urn.svg","alt","delete",1,"variables-icon"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.createVariable()}),t._uU(6," \u0421\u043e\u0437\u0434\u0430\u0442\u044c "),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t._UZ(11,"img",9),t.qZA(),t.TgZ(12,"input",10,11),t.NdJ("keyup",function(r){return n.onKeyPress(r)})("change",function(){t.CHM(i);const r=t.MAs(13);return t.KtG(r.value=r.value.trim())}),t.qZA()()()(),t.TgZ(14,"bb-loader",12),t.ALo(15,"async"),t.TgZ(16,"div",13)(17,"table",14)(18,"thead")(19,"tr")(20,"th",15),t._uU(21,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(22,"th",15),t._uU(23,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(24,"th",15),t._uU(25,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(26,"th",15),t._uU(27,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(28,"th",15),t._uU(29,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),t.qZA(),t.TgZ(30,"th",15),t._uU(31,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,M,13,4,"tr",16),t.qZA()()()()()()}2&e&&(t.xp6(12),t.Q6J("formControl",n.searchString),t.xp6(2),t.Q6J("loading",t.lcZ(15,3,n.variableService.isVariableListLoading$)||!1),t.xp6(19),t.Q6J("ngForOf",n.variablesList))},dependencies:[b.sg,s.Fj,s.JJ,s.oH,x.R,b.Ov],styles:[".variables-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.variables-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.variables-button[_ngcontent-%COMP%]{height:40px;padding:0 16px;width:auto}.variables-search[_ngcontent-%COMP%]{margin-bottom:24px}.variables-icon[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.variables[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 24px 8px 16px;border-radius:12px;background-color:#f3f3f3;max-width:328px;align-items:center;position:relative;margin-bottom:16px}.variables[_ngcontent-%COMP%]   .search__left[_ngcontent-%COMP%]{display:flex;align-items:center}.variables[_ngcontent-%COMP%]   .search__icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:8px}.variables[_ngcontent-%COMP%]   .search__text[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#152536}.variables[_ngcontent-%COMP%]   .search__input[_ngcontent-%COMP%]{width:100%;max-width:242px;border:none;background-color:transparent;outline:none;padding-right:8px;font-size:14px;font-weight:500;color:#152536}.variables-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .variables-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){text-align:center}"]});var A=a(8247),T=a(4466);const O=[{path:"",component:d}];class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[b.ez,A.Bz.forChild(O),s.UX,s.u5,T.m]})}}]);