"use strict";(self.webpackChunkbb_web=self.webpackChunkbb_web||[]).push([[592],{4135:(b,d,o)=>{o.d(d,{L:()=>i});var e=o(2340),n=o(2677),t=o(4537),c=o(5732);class i{constructor(u){this.http=u}createPost(u){return this.http.post(e.N.baseUrl+n.yA,u)}getPostById(u){return this.http.get(`${e.N.baseUrl+n.hY}/${u}`)}updatePost(u,r){return this.http.post(`${e.N.baseUrl+n.yA}/${r}`,u)}getPostVersionById(u){return this.http.get(`${e.N.baseUrl+n.zw}/${u}`)}revertPostVersion(u){return this.http.post(`${e.N.baseUrl+n.z6}`,u)}uploadImage(u){let r=new FormData;return r.append("image",u),this.http.post(`${e.N.baseUrl+n.GM}`,r)}deletePost(u){return this.http.post(`${e.N.baseUrl+n.yA}/${u}`,{_method:"DELETE"})}getAllPosts(){return this.http.get(`${e.N.baseUrl+n.Nw}`)}}i.\u0275fac=function(u){return new(u||i)(t.LFG(c.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})},9923:(b,d,o)=>{o.d(d,{S:()=>l});var e=o(2340),n=o(4121),t=o(2677),c=o(4537),i=o(5732);class l{constructor(r){this.http=r,this.variablesList$=new n.X([]),this.isVariableListLoading$=new n.X(!1)}getAllVariables(){this.isVariableListLoading$.next(!0),this.http.get(`${e.N.baseUrl+t.Az}`).subscribe({next:r=>{this.isVariableListLoading$.next(!1),this.variablesList$.next(r?.vars)},error:r=>{this.isVariableListLoading$.next(!1)}})}createVariable(r){return this.http.post(`${e.N.baseUrl+t.bV}`,r)}getVariablesByIds(r){return this.http.post(`${e.N.baseUrl+t.S_}`,r)}deleteVariable(r){return this.http.post(`${e.N.baseUrl+t.bV}/${r}`,{_method:"DELETE"})}editVariable(r,h){return this.http.post(`${e.N.baseUrl+t.bV}/${h}`,r)}}l.\u0275fac=function(r){return new(r||l)(c.LFG(i.eN))},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})},3891:(b,d,o)=>{o.d(d,{d:()=>p});var e=o(9900),n=o(7553),t=o(4537),c=o(1067),i=o(6943),l=o(9923),u=o(8292),r=o(3942),h=o(8692),v=o(6618);function E(_,s){if(1&_&&(t.TgZ(0,"ng-option",14),t._uU(1),t.qZA()),2&_){const a=s.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",null==a?null:a.title," ")}}function f(_,s){if(1&_&&(t.TgZ(0,"ng-option",14),t._uU(1),t.qZA()),2&_){const a=s.$implicit;t.Q6J("value",a),t.xp6(1),t.hij(" ",null==a?null:a.title," ")}}class p{constructor(s,a,m,g,D,C,M){this.activeModal=s,this.fb=a,this.categoryService=m,this.changeDetector=g,this.variableService=D,this.toastr=C,this.helperService=M,this.type="create",this.subcategories=[]}ngAfterViewInit(){"edit"===this.type&&(this.form.controls.name.setValue(this.editVariable.name),this.form.controls.varValue.setValue(this.editVariable.value),this.form.controls.category.setValue(this.categoryService.getCategoryById(this.editVariable?.category_id)),this.onCategoryChange(this.form.controls.category.value),this.form.controls.subcategory.setValue(this.categoryService.getLocalSubcategoryById(this.editVariable?.sub_category_id)),this.changeDetector.detectChanges())}close(){this.activeModal.close()}ngOnInit(){this.form=this.fb.group({name:[null,e.kI.required],varValue:[null,e.kI.required],category:[null,e.kI.required],subcategory:[null,e.kI.required]})}createVariable(){if(this.form.valid){const s={name:this.form.controls.name.value,value:this.form.controls.varValue.value,category_id:this.form.controls.category?.value?.id,sub_category_id:this.form.controls.subcategory?.value?.id};"edit"===this.type&&this.editVariable?(s._method="PUT",this.variableService.editVariable(s,this.editVariable.id).subscribe({next:a=>{this.variableService.getAllVariables(),this.close(),(0,n.PE)("\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430",this.toastr)},error:a=>{(0,n.N3)(a,this.toastr)}})):this.variableService.createVariable(s).subscribe({next:a=>{this.variableService.getAllVariables(),this.activeModal.close(a?.vars),(0,n.PE)("\u041d\u043e\u0432\u0430\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430",this.toastr)},error:a=>{(0,n.N3)(a,this.toastr)}})}else(0,n.Ss)(this.form,this.toastr)}onCategoryChange(s){this.subcategories=[],this.form.controls.subcategory.setValue(null),s&&(this.subcategories=s.sub_categories),this.changeDetector.detectChanges()}}p.\u0275fac=function(s){return new(s||p)(t.Y36(c.Kz),t.Y36(e.qu),t.Y36(i.H),t.Y36(t.sBO),t.Y36(l.S),t.Y36(u._W),t.Y36(r.W))},p.\u0275cmp=t.Xpm({type:p,selectors:[["bb-add-variable-modal"]],inputs:{type:"type",editVariable:"editVariable"},decls:29,vars:11,consts:[[1,"modal-header"],[1,"modal__title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body",3,"formGroup"],[1,"row"],[1,"col-6","mb_24"],[1,"modal__subtitle"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435","id","name","formControlName","name",1,"form-control","base-input",3,"autocomplete"],["formControlName","category","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e","dropdownPosition","bottom","notFoundText","\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",1,"base-select",3,"searchable","change"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435","id","varValue","formControlName","varValue",1,"form-control","base-input",3,"autocomplete"],["formControlName","subcategory","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e","dropdownPosition","bottom","notFoundText","\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",1,"base-select",3,"searchable"],[1,"modal-footer"],["type","button",1,"_btn","btn-success","variable-button",3,"click"],[3,"value"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return a.close()}),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"p",6),t._uU(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5)(11,"p",6),t._uU(12,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(13,"ng-select",8),t.NdJ("change",function(g){return a.onCategoryChange(g)}),t.YNc(14,E,2,2,"ng-option",9),t.ALo(15,"async"),t.qZA()()(),t.TgZ(16,"div",4)(17,"div",5)(18,"p",6),t._uU(19,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",5)(22,"p",6),t._uU(23,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),t.qZA(),t.TgZ(24,"ng-select",11),t.YNc(25,f,2,2,"ng-option",9),t.qZA()()()(),t.TgZ(26,"div",12)(27,"button",13),t.NdJ("click",function(){return a.createVariable()}),t._uU(28),t.qZA()()),2&s&&(t.xp6(2),t.hij(" ","edit"===a.type?"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439"," "),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("autocomplete",!1),t.xp6(4),t.Q6J("searchable",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(15,9,a.categoryService.categoryListObserver$)),t.xp6(6),t.Q6J("autocomplete",!1),t.xp6(4),t.Q6J("searchable",!0),t.xp6(1),t.Q6J("ngForOf",a.subcategories),t.xp6(3),t.hij(" ","edit"===a.type?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"," "))},dependencies:[h.sg,e.Fj,e.JJ,e.JL,e.sg,e.u,v.w9,v.jq,h.Ov],styles:[".modal-header[_ngcontent-%COMP%]{border-bottom:none;padding:24px}.modal-body[_ngcontent-%COMP%]{padding:24px;margin-bottom:32px}.modal__title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#152536;letter-spacing:.02em}.modal__subtitle[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#152536;letter-spacing:.02em;margin-bottom:16px}.variable-button[_ngcontent-%COMP%]{max-width:120px;height:40px}"]})},6169:(b,d,o)=>{o.d(d,{Y:()=>t});var e=o(4537),n=o(1067);class t{constructor(i){this.activeModal=i,this.message=""}close(){this.activeModal.close()}confirm(){this.activeModal.close(!0)}}t.\u0275fac=function(i){return new(i||t)(e.Y36(n.Kz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-confirmation-modal"]],inputs:{message:"message"},decls:12,vars:1,consts:[[1,"modal-header"],[1,"modal__title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"confirmation-text"],[1,"modal-footer"],[1,"_btn","btn-success","h-40","confirmation-button",3,"click"],[1,"_btn","btn-outline-green","h-40","confirmation-button",3,"click"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return l.close()}),e.qZA()(),e.TgZ(4,"div",3)(5,"p",4),e._uU(6),e.qZA()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return l.confirm()}),e._uU(9," \u0414\u0430 "),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return l.close()}),e._uU(11," \u041e\u0442\u043c\u0435\u043d\u0430 "),e.qZA()()),2&i&&(e.xp6(6),e.Oqu(l.message))},styles:[".confirmation-button[_ngcontent-%COMP%]{width:auto}.modal-body[_ngcontent-%COMP%]{margin:16px auto}"]})}}]);